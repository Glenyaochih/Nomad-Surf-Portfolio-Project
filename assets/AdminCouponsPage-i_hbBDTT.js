import{a as n,b as x,u as g,j as e,ag as C,ah as A,ai as _,aj as F,ak as E,al as I,am as P,an as D,ao as O}from"./index-CPSsFzsY.js";import{M as S}from"./bootstrap.esm-D2MXRMDr.js";import{A as W,a as B}from"./AdminMessageModal-BkhRFMHs.js";import{f as R,g as T}from"./index-C6AMSYZX.js";function G(){const a=n.useRef(null),t=n.useRef(null),d=x(i=>i.modal.addCouponModalOpen),l=x(i=>i.adminPostCoupon.initData),r=g();n.useEffect(()=>{t.current=new S(a.current,{backdrop:!1})},[]),n.useEffect(()=>{d&&t.current.show()},[d]);const m=()=>{t.current.hide(),r(C(!1))},c=i=>{const{name:u,value:b,checked:N,type:f}=i.target;r(A({name:u,value:b,checked:N,type:f}))},p=()=>{r(_())};return e.jsx(e.Fragment,{children:e.jsx("div",{ref:a,className:"modal fade",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},"aria-hidden":"false",children:e.jsx("div",{className:"modal-dialog modal-xl modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content border-0",children:[e.jsxs("div",{className:"modal-header bg-dark text-white",children:[e.jsx("h5",{id:"productModalLabel",className:"modal-title",children:"新增產品"}),e.jsx("button",{type:"button",className:"btn btn-primary text-light btn-close","data-bs-dismiss":"modal",onClick:m})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"title",className:"form-label h5",children:"優惠卷名稱"}),e.jsx("input",{value:l.title,onChange:c,name:"title",id:"title",type:"text",className:"form-control",placeholder:"請輸入標題"})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mb-5 col-md-6",children:[e.jsx("label",{htmlFor:"code",className:"form-label h5",children:"優惠卷代碼"}),e.jsx("input",{value:l.code,onChange:c,name:"code",id:"code",type:"text",className:"form-control",placeholder:"請輸入代碼"})]}),e.jsxs("div",{className:"mb-5 col-md-6",children:[e.jsx("label",{htmlFor:"price",className:"form-label h5",children:"折扣率"}),e.jsx("input",{value:l.percent,onChange:c,name:"percent",id:"percent",type:"number",className:"form-control",placeholder:"請輸入折扣率"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mb-5 col-md-6",children:[e.jsx("label",{htmlFor:"due_date",className:"form-label h5",children:"到期日"}),e.jsx("input",{value:l.due_date,onChange:c,name:"due_date",id:"due_date",type:"date",className:"form-control",placeholder:"請輸入到期日"})]}),e.jsx("div",{className:"mb-5 col-md-6",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{checked:l.is_enabled,onChange:c,name:"is_enabled",id:"is_enabled",className:"form-check-input",type:"checkbox"}),e.jsx("label",{className:"form-check-label h6",htmlFor:"is_enabled",children:"是否啟用"})]})})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:m,children:"取消"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:p,children:"確認"})]})]})})})})}function J(){const a=g(),t=x(s=>s.adminGetCoupons.coupons),d=x(s=>s.adminPutCoupon.tempCoupon),l=x(s=>s.adminDelCoupons.idContainer),[r,m]=n.useState(""),[c,p]=n.useState(!1),[i,u]=n.useState(!1),b=()=>{a(C(!0))},N=()=>{l.length>0&&u(!0)},f=(s,o)=>{const{checked:h}=s.target;a(E({checked:h,couponId:o}))},y=()=>{a(I())},v=s=>{m(s.id),a(P(s))},j=s=>{const{name:o,value:h,checked:M,type:w}=s.target;a(D({name:o,value:h,checked:M,type:w}))},k=()=>{a(O())};return n.useEffect(()=>{a(F({page:1}))},[a]),e.jsxs(e.Fragment,{children:[e.jsx(W,{isOpen:i,setIsOpen:u,idContainer:l,items:t,itemName:"title",deleteTitle:"刪除優惠卷",action:y}),e.jsx(G,{}),e.jsxs("div",{children:[e.jsxs("div",{className:" banner mb-4",children:[e.jsx("h5",{className:"fs-5 mt-4 mb-7",children:"優惠卷管理"}),e.jsx("div",{className:"d-flex justify-content-between align-items-center",children:e.jsxs("div",{className:"ms-auto",children:[e.jsxs("button",{onClick:b,className:"btn btn-dark text-white border deleteButton px-4 me-4",children:[e.jsx("i",{className:"bi bi-trash text-white me-1"}),"新增優惠卷"]}),e.jsxs("button",{onClick:N,className:"btn btn-dark text-white border deleteButton px-4",children:[e.jsx("i",{className:"bi bi-trash text-white me-1"}),"刪除優惠卷"]})]})})]}),e.jsx("div",{className:"table-responsive position-relative",children:e.jsx("div",{className:"table-container border d-flex","data-bs-spy":"scroll","data-bs-target":"#productTableBody","data-bs-offset":"0",tabIndex:"0",children:e.jsxs("table",{className:"table productManager rounded-table table-container table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"",scope:"col",style:{width:"80px"},children:"#"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"修改"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"優惠卷名稱"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"折扣碼"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"折扣率"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"到期日"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"是否啟用"})]})}),e.jsx("tbody",{className:"rounded-bottom",children:t==null?void 0:t.map((s,o)=>e.jsx("tr",{className:"",children:s.id!==r?e.jsxs(e.Fragment,{children:[e.jsx("th",{scope:"col",className:"align-middle",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{onChange:h=>{f(h,s.id)},className:"form-check-input ms-0",type:"checkbox",value:s.id,id:s.id}),e.jsx("label",{className:"form-check-label",htmlFor:s.id,children:o+1})]})}),e.jsx("td",{className:"align-middle",children:e.jsx("button",{className:"btn",onClick:()=>{p(!0),v(s)},disabled:c,children:e.jsx(R,{})})}),e.jsx("td",{className:"align-middle",children:s.title}),e.jsx("td",{className:"align-middle",children:s.code}),e.jsxs("td",{className:"align-middle",children:[s.percent,"%"]}),e.jsx("td",{className:"align-middle"}),e.jsx("td",{className:"align-middle",children:s.is_enabled?e.jsx("span",{className:"text-success",children:"啟用"}):e.jsx("span",{className:"text-secondary",children:"關閉"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{scope:"row",className:"align-middle",children:e.jsx("label",{className:"mt-1",children:o+1})}),e.jsx("td",{className:"align-middle",children:e.jsx("button",{className:"btn",onClick:()=>{p(!1),m(""),k()},children:e.jsx(T,{})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center ",children:e.jsx("input",{value:d.title,onChange:j,name:"title",style:{maxWidth:"150px",height:"40px"},type:"text",className:"form-control fs-7"})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("input",{className:"form-control fs-7",value:d.code,onChange:j,name:"code",type:"text",style:{maxWidth:"150px",height:"40px"}})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("input",{className:"form-control fs-7",value:d.percent,onChange:j,name:"percent",type:"text",style:{maxWidth:"150px",height:"40px"}})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("input",{value:d.due_date,onChange:j,name:"due_date",className:"form-control fs-7",type:"date",style:{maxWidth:"150px",height:"40px"}})})}),e.jsx("td",{className:"align-middle",children:e.jsxs("div",{className:"form-check ",children:[e.jsx("input",{name:"is_enabled",id:"is_enabled",className:"form-check-input",type:"checkbox"}),e.jsx("label",{className:"form-check-label",htmlFor:"is_enabled",children:"是否啟用"})]})})]})},s.id))})]})})}),e.jsx(B,{pageState:"coupons"})]})]})}export{J as default};
