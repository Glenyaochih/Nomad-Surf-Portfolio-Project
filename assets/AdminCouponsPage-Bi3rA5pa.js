import{b as i,a as p,u as f,j as e,ac as g,ad as v,ae as k,af as w,ag as M,ah as _,ai as A,aj as F,ak as E}from"./index-Dppbq8ve.js";import{M as I}from"./bootstrap.esm-D2MXRMDr.js";import{A as P}from"./AdminPagination-DF_v-Se-.js";import{f as D,g as S}from"./index-Bf0SCmEq.js";function O(){const a=i.useRef(null),t=i.useRef(null),n=p(c=>c.modal.addCouponModalOpen),d=p(c=>c.adminPostCoupon.initData),o=f();i.useEffect(()=>{t.current=new I(a.current,{backdrop:!1})},[]),i.useEffect(()=>{n&&t.current.show()},[n]);const x=()=>{t.current.hide(),o(g(!1))},l=c=>{const{name:j,value:b,checked:r,type:N}=c.target;o(v({name:j,value:b,checked:r,type:N}))},u=()=>{o(k())};return e.jsx(e.Fragment,{children:e.jsx("div",{ref:a,className:"modal fade",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},"aria-hidden":"false",children:e.jsx("div",{className:"modal-dialog modal-xl modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content border-0",children:[e.jsxs("div",{className:"modal-header bg-dark text-white",children:[e.jsx("h5",{id:"productModalLabel",className:"modal-title",children:"新增產品"}),e.jsx("button",{type:"button",className:"btn btn-primary text-light btn-close","data-bs-dismiss":"modal",onClick:x})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"title",className:"form-label h5",children:"優惠卷名稱"}),e.jsx("input",{value:d.title,onChange:l,name:"title",id:"title",type:"text",className:"form-control",placeholder:"請輸入標題"})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mb-5 col-md-6",children:[e.jsx("label",{htmlFor:"code",className:"form-label h5",children:"優惠卷代碼"}),e.jsx("input",{value:d.code,onChange:l,name:"code",id:"code",type:"text",className:"form-control",placeholder:"請輸入代碼"})]}),e.jsxs("div",{className:"mb-5 col-md-6",children:[e.jsx("label",{htmlFor:"price",className:"form-label h5",children:"折扣率"}),e.jsx("input",{value:d.percent,onChange:l,name:"percent",id:"percent",type:"number",className:"form-control",placeholder:"請輸入折扣率"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mb-5 col-md-6",children:[e.jsx("label",{htmlFor:"due_date",className:"form-label h5",children:"到期日"}),e.jsx("input",{value:d.due_date,onChange:l,name:"due_date",id:"due_date",type:"date",className:"form-control",placeholder:"請輸入到期日"})]}),e.jsx("div",{className:"mb-5 col-md-6",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{checked:d.is_enabled,onChange:l,name:"is_enabled",id:"is_enabled",className:"form-check-input",type:"checkbox"}),e.jsx("label",{className:"form-check-label h6",htmlFor:"is_enabled",children:"是否啟用"})]})})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:x,children:"取消"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:u,children:"確認"})]})]})})})})}function L(){const a=f(),t=p(s=>s.adminGetCoupons.coupons),n=p(s=>s.adminPutCoupon.tempCoupon),[d,o]=i.useState(""),[x,l]=i.useState(!1),u=()=>{a(g(!0))},c=(s,m)=>{const{checked:h}=s.target;a(M({checked:h,couponId:m}))},j=()=>{a(_())},b=s=>{o(s.id),a(A(s))},r=s=>{const{name:m,value:h,checked:C,type:y}=s.target;a(F({name:m,value:h,checked:C,type:y}))},N=()=>{a(E())};return i.useEffect(()=>{a(w({page:1}))},[a]),e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsxs("div",{children:[e.jsxs("div",{className:" banner mb-4",children:[e.jsx("h5",{className:"fs-5 mt-4 mb-7",children:"優惠卷管理"}),e.jsx("div",{className:"d-flex justify-content-between align-items-center",children:e.jsxs("div",{className:"ms-auto",children:[e.jsxs("button",{onClick:u,className:"btn btn-dark text-white border deleteButton px-4 me-4",children:[e.jsx("i",{className:"bi bi-trash text-white me-1"}),"新增優惠卷"]}),e.jsxs("button",{onClick:j,className:"btn btn-dark text-white border deleteButton px-4",children:[e.jsx("i",{className:"bi bi-trash text-white me-1"}),"刪除優惠卷"]})]})})]}),e.jsx("div",{className:"table-responsive position-relative",children:e.jsx("div",{className:"table-container border d-flex","data-bs-spy":"scroll","data-bs-target":"#productTableBody","data-bs-offset":"0",tabIndex:"0",children:e.jsxs("table",{className:"table productManager rounded-table table-container table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"",scope:"col",style:{width:"80px"},children:"#"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"修改"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"優惠卷名稱"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"折扣碼"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"折扣率"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"到期日"}),e.jsx("th",{scope:"col",style:{width:"200px"},children:"是否啟用"})]})}),e.jsx("tbody",{className:"rounded-bottom",children:t==null?void 0:t.map((s,m)=>e.jsx("tr",{className:"",children:s.id!==d?e.jsxs(e.Fragment,{children:[e.jsx("th",{scope:"col",className:"align-middle",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{onChange:h=>{c(h,s.id)},className:"form-check-input ms-0",type:"checkbox",value:s.id,id:s.id}),e.jsx("label",{className:"form-check-label",htmlFor:s.id,children:m+1})]})}),e.jsx("td",{className:"align-middle",children:e.jsx("button",{className:"btn",onClick:()=>{l(!0),b(s)},disabled:x,children:e.jsx(D,{})})}),e.jsx("td",{className:"align-middle",children:s.title}),e.jsx("td",{className:"align-middle",children:s.code}),e.jsxs("td",{className:"align-middle",children:[s.percent,"%"]}),e.jsx("td",{className:"align-middle"}),e.jsx("td",{className:"align-middle",children:s.is_enabled?e.jsx("span",{className:"text-success",children:"啟用"}):e.jsx("span",{className:"text-secondary",children:"關閉"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("th",{scope:"row",className:"align-middle",children:e.jsx("label",{className:"mt-1",children:m+1})}),e.jsx("td",{className:"align-middle",children:e.jsx("button",{className:"btn",onClick:()=>{l(!1),o(""),N()},children:e.jsx(S,{})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center ",children:e.jsx("input",{value:n.title,onChange:r,name:"title",style:{maxWidth:"150px",height:"40px"},type:"text",className:"form-control fs-7"})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("input",{className:"form-control fs-7",value:n.code,onChange:r,name:"code",type:"text",style:{maxWidth:"150px",height:"40px"}})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("input",{className:"form-control fs-7",value:n.percent,onChange:r,name:"percent",type:"text",style:{maxWidth:"150px",height:"40px"}})})}),e.jsx("td",{className:"align-middle",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("input",{value:n.due_date,onChange:r,name:"due_date",className:"form-control fs-7",type:"date",style:{maxWidth:"150px",height:"40px"}})})}),e.jsx("td",{className:"align-middle",children:e.jsxs("div",{className:"form-check ",children:[e.jsx("input",{name:"is_enabled",id:"is_enabled",className:"form-check-input",type:"checkbox"}),e.jsx("label",{className:"form-check-label",htmlFor:"is_enabled",children:"是否啟用"})]})})]})},s.id))})]})})}),e.jsx(P,{pageState:"coupons"})]})]})}export{L as default};
